INCLUDE = -I../structures
CXXFLAGS = -Wall $(INCLUDE)
LDLIBS = -lgtest

all: test $(EXEC)

.PHONY : test clean

test: $(EXEC)
	./$<

depend: .depend

.depend: $(TEST_SRC:=.cpp) $(MAIN_SRC:=.cpp)
	rm -f ./.depend
	$(CXX) $(CXXFLAGS) -MM $^>>./.depend;

$(EXEC): $(TEST_SRC:=.o)
	$(CXX) -o $@ $^ $(CXXFLAGS) $(LDFLAGS) $(LDLIBS)

$(EXEC): $(MAIN_SRC:=.o)
	$(CXX) -o $@ $^ $(CXXFLAGS) $(LDFLAGS) $(LDLIBS)

clean:
	$(RM) -rf $(EXEC) $(EXEC) $(EXTRA) *.o .depend

-include .depend
